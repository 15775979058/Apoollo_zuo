# Nvidia Driver and CUDA are required for these 2 subnodes
subnode_config {
    # Camera node
    subnodes {
        id: 3
        name: "CameraProcessSubnode"
        reserve: "device_id:camera;"
        type: SUBNODE_IN
    }

    subnodes {
        id: 2
        name: "RadarProcessSubnode"
        reserve: "device_id:radar_front;"
        type: SUBNODE_IN
    }

    # @Zuo added 2018-05-15
    subnodes {
        id: 4
        name: "RadarProcessLeftSubnode"
        reserve: "device_id:radar_left;"
        type: SUBNODE_IN
    }

    subnodes {
        id: 31
        name: "FusionSubnode"
        reserve: "pub_driven_event_id:1009;camera_event_id:1009;radar_event_id:1013;radar_left_event_id:1014;"
        type: SUBNODE_NORMAL
    }

    # Visualization node
    subnodes {
        id: 41
        name: "VisualizationSubnode"
        reserve: "vis_driven_event_id:1008;camera_event_id:1008;fusion_event_id:1011;radar_event_id:1012;radar_left_event_id:1015;"
        type: SUBNODE_OUT
    }
}

###################################################################
# Define all edges which link nodes.
edge_config {
   
    # CameraProcessSubnode -> VisualizationSubnode
    edges {
        id: 108
        from_node: 3
        to_node: 41
        events {
            id: 1008
            name: "camera_visualization"
        }
    }
	
    # CameraProcessSubnode -> FusionSubnode
    edges {
        id: 109
        from_node: 3
        to_node: 31
        events {
            id: 1009
            name: "camera_fusion"
        }
    }

    # FusionSubnode -> VisualizationSubnode
    edges {
        id: 111
        from_node: 31
        to_node: 41
        events {
            id: 1011
            name: "fusion_visualization"
        }
    }

    # RadarSubnode -> VisualizationSubnode
    edges {
        id: 112
        from_node: 2
        to_node: 41
        events {
            id: 1012
            name: "radar_visualization"
        }
     }

    # @Zuo RadarLeftSubnode -> VisualizationSubnode
#    edges {
#        id: 114
#        from_node: 4
#        to_node: 41
#        events {
#            id: 1015
#            name: "radar_visualization_left"
#        }
#     }
    
    # RadarSubnode -> FusionSubnode
    edges {
        id: 113
        from_node: 2
        to_node: 31
        events {
            id: 1013
            name: "radar_fusion"
        }
    }

    # @Zuo RadarLeftSubnode -> FusionSubnode
    edges {
        id: 115
        from_node: 4
        to_node: 31
        events {
            id: 1014
            name: "radar_fusion_left"
        }
    }
}

# Shared Data
data_config {
    datas {
        id: 5
        name: "CameraObjectData"
    }
    datas {
        id: 7
        name: "CameraSharedData"
    }
    datas {
        id: 9
        name: "FusionSharedData"
    }
    datas {
        id: 10
        name: "RadarObjectData"
    }
}
